<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pseudo-function to compute a statistic relative to a reference set. — Percent • tables</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pseudo-function to compute a statistic relative to a reference set. — Percent"><meta name="description" content="The Percent pseudo-function is used to specify
a statistic that depends on other values in the table."><meta property="og:description" content="The Percent pseudo-function is used to specify
a statistic that depends on other values in the table."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.33</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/HTML.html">HTML Tables</a></li>
    <li><a class="dropdown-item" href="../articles/knitrTables.pdf">Tables in R Markdown (PDF)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dmurdoch/tables/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Pseudo-function to compute a statistic relative to a reference set.</h1>

      <div class="d-none name"><code>Percent.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>Percent</code> pseudo-function is used to specify
a statistic that depends on other values in the table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Percent</span><span class="op">(</span>denom <span class="op">=</span> <span class="st">"all"</span>, fn <span class="op">=</span> <span class="va">percent</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-denom">denom<a class="anchor" aria-label="anchor" href="#arg-denom"></a></dt>
<dd><p>How the reference set (the denominator in case
of a percentage calculation) should be calculated.  See below.</p></dd>

  <dt id="arg-fn">fn<a class="anchor" aria-label="anchor" href="#arg-fn"></a></dt>
<dd><p>The two argument function to calculate the statistic.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function <code>fn</code> will be called with two
arguments.  The first argument is the usual “value vector”
of values
corresponding to this cell in the table,
and the second
is another vector of reference values, determined
by <code>denom</code>.</p>
<p>The default value of <code>fn</code> is the <code>percent</code> function,
defined as <code>function(x, y) 100*length(x)/length(y)</code>.  This
gives the ratio of the number of values in the current cell
relative to the reference values, expressed as a percentage.
Using <code>fn = function(x, y) 100*sum(x)/sum(y)</code> would give
the percentage of the sum of the values in the current cell to
the sum in the reference set.</p>
<p>With the default <code>denom = "all"</code>, all values of the
analysis variable in the dataset are used as the reference.  Other possibilities
are <code>denom = "row"</code> or <code>denom = "col"</code>, for which
the values of the variable corresponding to the current row
or column subset are used.</p>
<p>The special syntax <code>denom = Equal(...)</code> will record
each expression in <code>...</code>.  The
reference set will be the cases with equal values of all
expressions in <code>...</code> to those of the current cell.
The similar form <code>denom = Unequal(...)</code>
sets the reference values to be those that differ in any
of the <code>...</code> expressions from the current cell.  (In
fact, these can be used somewhat more generally; see the
vignette for details.)</p>
<p>Finally, other possible <code>denom</code> values
are a logical vector, in which
case the values marked <code>TRUE</code> are used, or anything else, which will
be passed to <code>fn</code> as <code>y</code> without any subsetting.  (To pass a variable with subsetting,
use the <code><a href="Arguments.html">Arguments</a></code> pseudo-function instead.)</p>
    </div>
    <div class="section level2">
    <h2 id="pseudo-functions">Pseudo-functions<a class="anchor" aria-label="anchor" href="#pseudo-functions"></a></h2>
    <p><code>Percent</code> is a “pseudo-function”:  it takes the form of a function call, but is
never actually called:  it is
handled specially by <code><a href="tabular.html">tabular</a></code>.  <code>Equal</code> and <code>Unequal</code>
are also pseudo-functions, but are only special when used
in the <code>denom</code> argument to <code>Percent</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="Arguments.html">Arguments</a></code> for a different way to specify
a multiple argument analysis function.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># These both do the same thing:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tabular.html">tabular</a></span><span class="op">(</span> <span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">y</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="op">(</span><span class="va">z</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="op">(</span><span class="va">RowPct</span><span class="op">=</span><span class="fu">Percent</span><span class="op">(</span><span class="st">"row"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          z                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          E          F          All        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  x   y   All RowPct All RowPct All  RowPct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A   c   118 50.64  115 49.36   233 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   139 54.30  117 45.70   256 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 257 52.56  232 47.44   489 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B   c   132 50.77  128 49.23   260 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   127 50.60  124 49.40   251 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 259 50.68  252 49.32   511 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  All c   250 50.71  243 49.29   493 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   266 52.47  241 47.53   507 100   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 516 51.60  484 48.40  1000 100   </span>
<span class="r-in"><span><span class="fu"><a href="tabular.html">tabular</a></span><span class="op">(</span> <span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">y</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="op">(</span><span class="va">z</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="op">(</span><span class="va">xyPct</span><span class="op">=</span><span class="fu">Percent</span><span class="op">(</span><span class="fu">Equal</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          z                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          E         F         All       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  x   y   All xyPct All xyPct All  xyPct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A   c   118 50.64 115 49.36  233 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   139 54.30 117 45.70  256 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 257 52.56 232 47.44  489 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B   c   132 50.77 128 49.23  260 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   127 50.60 124 49.40  251 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 259 50.68 252 49.32  511 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  All c   250 50.71 243 49.29  493 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      d   266 52.47 241 47.53  507 100  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      All 516 51.60 484 48.40 1000 100  </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Duncan Murdoch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

